/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP SE. All rights reserved
 */
(function(){"use strict";sap.ui.jsview("sap.apf.ui.reuse.view.navigationTarget",{getControllerName:function(){return"sap.apf.ui.reuse.controller.navigationTarget";},createContent:function(c){var v=this.getViewData();this.oNavListPopover=v.oNavListPopover;this.oOpenInButtonEventSource=v.oOpenInButtonEventSource;this.oNavigationHandler=v.oNavigationHandler;this.oUiApi=v.oUiApi;this.oController=c;this.oUiApi.getLayoutView().byId("applicationPage").setBusy(true);var n=this.oNavigationHandler.getNavigationTargets();n.then(this._prepareActionListModel.bind(this),function(){this.oUiApi.getLayoutView().byId("applicationPage").setBusy(false);});},_prepareActionListModel:function(n){var c=this;var a=[];var b=[];n.global.forEach(function(t){if(t.title){t.text=c.getViewData().oCoreApi.getTextNotHtmlEncoded(t.title);}a.push(t);});n.stepSpecific.forEach(function(t){if(t.title){t.text=c.getViewData().oCoreApi.getTextNotHtmlEncoded(t.title);}b.push(t);});this.oNavListPopover.removeAllContent();var g,s;var d=this;if(b.length!==0){var m=new sap.ui.model.json.JSONModel();var D={navTargets:b};s=new sap.m.List({items:{path:"/navTargets",template:new sap.m.StandardListItem({title:"{text}",type:sap.m.ListType.Navigation,press:function(E){var f=E.getSource().getBindingContext().getObject().id;d.oController.handleNavigation(f);}})}});m.setData(D);s.setModel(m);var e=new sap.ui.core.HTML({content:'<hr class="lineSeparator">',sanitizeContent:true});this.oNavListPopover.addContent(s);this.oNavListPopover.addContent(e);}if(a.length!==0){var M=new sap.ui.model.json.JSONModel();var o={navTargets:a};g=new sap.m.List({items:{path:"/navTargets",template:new sap.m.StandardListItem({title:"{text}",type:sap.m.ListType.Navigation,press:function(E){var f=E.getSource().getBindingContext().getObject().id;d.oController.handleNavigation(f);}})}});M.setData(o);g.setModel(M);this.oNavListPopover.addContent(g);}this.oUiApi.getLayoutView().byId("applicationPage").setBusy(false);this.oNavListPopover.openBy(this.oOpenInButtonEventSource);}});}());
