/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
(function(){"use strict";sap.ui.jsfragment("sap.apf.ui.reuse.fragment.pathGallery",{createContent:function(c){var s=this;this.contentWidth=jQuery(window).height()*0.6+"px";this.contentHeight=jQuery(window).height()*0.6+"px";this.oCoreApi=c.oCoreApi;this.oUiApi=c.oUiApi;var o=function(e){var l=[];var S=e.getSource().getValue();var L=s.pathGalleryHierarchicalDialog.getContent()[0].getCurrentPage().getContent()[0];if(S&&S.length>0){var f=new sap.ui.model.Filter("title",sap.ui.model.FilterOperator.Contains,S);l.push(f);}var g=L.getBinding("items");g.filter(l);};var p=new sap.m.List().bindItems({path:'StructuredAnalysisPath/steps',template:new sap.m.StandardListItem({title:'{title}',tooltip:'{title}',type:"Active",icon:'{imgSrc}',press:function(e){s.oUiApi.getLayoutView().setBusy(true);var f=e.getSource().getBindingContext().sPath.split('/');var g=this.getModel().getData().GalleryElements[f[2]].AnalysisPathName;var h=this.getModel().getData().GalleryElements[f[2]].AnalysisPath;var i=f[5];c.openPath(g,h,i);s.oUiApi.getLayoutView().setBusy(false);}})});var a=new sap.m.Page({subHeader:new sap.m.Bar({contentLeft:[new sap.m.SearchField({liveChange:o})]}),content:p,showNavButton:true,navButtonPress:function(){s.oPathGalleryNavContainer.back();}});var b=new sap.m.List().bindItems({path:'/GalleryElements',template:new sap.m.StandardListItem({title:'{title}',tooltip:'{title}',description:'{description}',type:"Navigation",press:function(e){var B=e.getSource().getBindingContext();a.setBindingContext(B);a.setTitle(e.getSource().getTitle());s.oPathGalleryNavContainer.to(s.oPathGalleryNavContainer.getPages()[1]);}})});var d=new sap.m.Page({title:s.oCoreApi.getTextNotHtmlEncoded("select-analysis-path"),subHeader:new sap.m.Bar({contentLeft:[new sap.m.SearchField({liveChange:o})]}),content:b});this.oPathGalleryNavContainer=new sap.m.NavContainer({pages:[d,a]});this.oPathGalleryNavContainer.setModel(c.getView().getModel());s.pathGalleryHierarchicalDialog=new sap.m.Dialog({contentWidth:s.contentWidth,contentHeight:s.contentHeight,showHeader:false,content:[this.oPathGalleryNavContainer],endButton:new sap.m.Button({text:s.oCoreApi.getTextNotHtmlEncoded("cancel"),press:function(){s.pathGalleryHierarchicalDialog.close();}}),afterClose:function(){s.pathGalleryHierarchicalDialog.destroy();}});return this.pathGalleryHierarchicalDialog;}});}());
