/*!
 * SAP APF Analysis Path Framework
 *
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/apf/modeler/ui/utils/constants"],function(m){'use strict';var S=function(c,s){this.oCoreApi=c;this.oStep=s;};function _(e,s,a){var p=[],A;var b=s.oStep.getSelectProperties();b.forEach(function(P){if(s.getPropertyMetadata(e,P)){A=s.getPropertyMetadata(e,P)["aggregation-role"];if(A===a){p.push(P);}}});return p;}S.prototype.getEntityTypeMetadataAsPromise=function(){var a=this.oStep.getService();var e=this.oStep.getEntitySet();return this.oCoreApi.getEntityTypeMetadataAsPromise(a,e);};S.prototype.getFilterMappingEntityTypeMetadataAsPromise=function(a,e){return this.oCoreApi.getEntityTypeMetadataAsPromise(a,e);};S.prototype.getDimensionsProperties=function(e){return _(e,this,m.aggregationRoles.DIMENSION);};S.prototype.getMeasures=function(e){return _(e,this,m.aggregationRoles.MEASURE);};S.prototype.getProperties=function(){return this.oStep.getSelectProperties();};S.prototype.getHierarchicalProperty=function(){return this.oStep.getHierarchyProperty();};S.prototype.getPropertyMetadata=function(e,p){if(!e){return undefined;}return e.getPropertyMetadata(p);};S.prototype.getDefaultLabel=function(e,p){var s=this;var P=s.getPropertyMetadata(e,p);if(!P){return"";}return P.label||P.name;};S.prototype.hasTextPropertyOfDimension=function(e,d){var i=false,s,o=this;var D=o.getPropertyMetadata(e,d);if(!D){return i;}if(D.text){s=this.oStep.getSelectProperties();i=s.indexOf(D.text)===-1?false:true;}return i;};S.prototype.getRepresentationTypesArray=function(){var v=[],s=this;if(s.oStep.getType()==="hierarchicalStep"){v.push({key:"TreeTableRepresentation",name:s.oCoreApi.getText("TreeTableRepresentation")});}else{s.oCoreApi.getRepresentationTypes().forEach(function(r){if(r.metadata){if(r.id!=="TreeTableRepresentation"){v.push({key:r.id,name:s.oCoreApi.getText(r.label.key)});}}});}return v;};S.prototype.getStepType=function(){return this.oStep.getType();};sap.apf.modeler.ui.utils.StepPropertyMetadataHandler=S;return S;},true);
