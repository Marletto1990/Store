/*!
 * SAP APF Analysis Path Framework
 *
 * (c) Copyright 2012-2014 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.apf.modeler.ui.utils.navigationHandler');sap.apf.modeler.ui.utils.navigationHandler=(function(){"use strict";var i,d={};var _=function(d){d.close();};var h=function(){var l=this.configListInstance;var m=this.callback;var s=function(m){l.configEditor.save(function(n,o,p){l.configId=n;l.configurationHandler.memorizeConfiguration(n);if(p===undefined){if(typeof m==="function"){m();}var M=l.oCoreApi.createMessageObject({code:"11513"});l.oCoreApi.putMessage(M);}else{var M=l.oCoreApi.createMessageObject({code:"11514"});l.oCoreApi.putMessage(M);}});};_(d.oConfirmNavigationDialog);if(typeof m.yes==="function"){m.yes(s);}};var a=function(){var l=this.configListInstance;var m=this.callback;_(d.oConfirmNavigationDialog);l.configurationHandler.resetConfiguration(l.configId);if(typeof m.no==="function"){m.no();}};var b=function(){var l=this.isValidationCheck;var m=this.callback;if(!l){_(d.oConfirmNavigationDialog);}else{_(d.oConfirmValidationDialog);}if(typeof m.cancel==="function"){m.cancel();}else if(typeof m.no==="function"&&l){m.no();}};var c=function(C,l){if(l==="naviagtionDialog"){sap.ui.core.Fragment.byId("idMessageDialogFragment","idMessageDialog").setTitle(C.getText("warning"));sap.ui.core.Fragment.byId("idMessageDialogFragment","idYesButton").setText(C.getText("yes"));sap.ui.core.Fragment.byId("idMessageDialogFragment","idNoButton").setText(C.getText("no"));sap.ui.core.Fragment.byId("idMessageDialogFragment","idCancelButton").setText(C.getText("cancel"));}else if(l==="validationDialog"){sap.ui.core.Fragment.byId("idMandatoryValidationDialogFragement","idMandatoryValidationDialog").setTitle(C.getText("warning"));sap.ui.core.Fragment.byId("idMandatoryValidationDialogFragement","idYesButton").setText(C.getText("yes"));sap.ui.core.Fragment.byId("idMandatoryValidationDialogFragement","idNoButton").setText(C.getText("no"));}};var e=function(l,s,m){var C=l.oCoreApi;var n=C.getText("unsavedConfiguration");var o=Object.keys(s)[0];var p={handleNavigationWithSave:h,handleNavigationWithoutSave:a,handlePreventNavigation:b,configListInstance:l,callback:m};p[o]=s[o];d.oConfirmNavigationDialog=sap.ui.xmlfragment("idMessageDialogFragment","sap.apf.modeler.ui.fragment.unsavedDataConfirmationDialog",p);l.getView().addDependent(d.oConfirmNavigationDialog);c(C,"naviagtionDialog");var q=new sap.m.Text();q.setText(n);d.oConfirmNavigationDialog.removeAllContent();d.oConfirmNavigationDialog.addContent(q);d.oConfirmNavigationDialog.attachAfterClose(function(){d.oConfirmNavigationDialog.destroy();});d.oConfirmNavigationDialog.open();};var t=function(l,m){e(l,{isSwitchConfiguration:true},m);};var f=function(){var l=this.callback;_(d.oConfirmValidationDialog);if(typeof l.yes==="function"){l.yes();}};var g=function(l,s,m){var C=l.oCoreApi;var n=C.getText("mandatoryField");var o=Object.keys(s)[0];var p={handleValidationNavigation:f,handlePreventNavigation:b,configListInstance:l,callback:m};p[o]=s[o];d.oConfirmValidationDialog=sap.ui.xmlfragment("idMandatoryValidationDialogFragement","sap.apf.modeler.ui.fragment.mandatoryDialog",p);l.getView().addDependent(d.oConfirmValidationDialog);c(C,"validationDialog");var v=new sap.m.Text();v.setText(n);d.oConfirmValidationDialog.removeAllContent();d.oConfirmValidationDialog.addContent(v);d.oConfirmValidationDialog.attachAfterClose(function(){d.oConfirmValidationDialog.destroy();});d.oConfirmValidationDialog.open();};var j=function(l,m){g(l,{isValidationCheck:true},m);};var k=function(){return{throwLossOfDataPopup:t,throwMandatoryPopup:j};};return{getInstance:function(){return i||(i=k());}};}());
