/*!
 * SAP APF Analysis Path Framework
 *
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
jQuery.sap.require("sap.apf.modeler.ui.controller.sortPropertyType");jQuery.sap.require("sap.apf.modeler.ui.utils.textManipulator");(function(){"use strict";var t=sap.apf.modeler.ui.utils.textManipulator;sap.apf.modeler.ui.controller.sortPropertyType.extend("sap.apf.modeler.ui.controller.representationSortPropertyType",{onBeforeRendering:function(){var c=this;c.byId("idGridSortLabel").setSpan("L2 M2 S2");c.byId("idGridSortProperty").setSpan("L4 M4 S4");c.byId("idGridSortDirectionLabel").setSpan("L2 M2 S2");c.byId("idGridSortDirection").setSpan("L3 M3 S2");c.byId("idGridIconLayout").setSpan("L1 M1 S1");},disableView:function(){var c=this;if(c.oStepPropertyMetadataHandler.oStep.getTopN()){c.byId("idSortProperty").setEnabled(false);c.byId("idSortDirection").setEnabled(false);c.byId("idAddPropertyIcon").setVisible(false);c.byId("idRemovePropertyIcon").setVisible(false);}},getAllPropertiesAsPromise:function(){var c=this,a,s,p;var d=jQuery.Deferred();c.oStepPropertyMetadataHandler.oStep.getConsumableSortPropertiesForRepresentation(c.oParentObject.getId()).done(function(r){a=r.consumable;s=c.getSelectedSortProperty();if(s!==c.oTextReader("none")&&s!==undefined){p=a.indexOf(s)!==-1?a:a.concat(s);a=r.available.indexOf(s)!==-1?p:a.concat(t.addPrefixText([s],c.oTextReader));s=r.available.indexOf(s)!==-1?s:t.addPrefixText([s],c.oTextReader)[0];}a.splice(0,0,c.oTextReader("none"));d.resolve({aAllProperties:a,sSelectedKey:s});});return d.promise();},updateOfConfigurationObjectOfSubclass:function(s){var c=this;c.oParentObject.removeAllOrderbySpecs();s.forEach(function(o){c.oParentObject.addOrderbySpec(o.property,o.ascending);});},getOrderBy:function(){var c=this;return c.oParentObject.getOrderbySpecifications();},setNextPropertyInParentObject:function(){var c=this;c.updateOfConfigurationObject();c.byId("idSortDirection").setSelectedKey("true");},removePropertyFromParentObject:function(){var c=this;c.oParentObject.removeOrderbySpec(t.removePrefixText(c.byId("idSortProperty").getSelectedKey(),c.oTextReader(sap.apf.modeler.ui.utils.CONSTANTS.texts.NOTAVAILABLE)));},addPropertyAsPromise:function(){var c=this;var d=jQuery.Deferred();var C=sap.apf.modeler.ui.utils.CONSTANTS.events;c.oStepPropertyMetadataHandler.oStep.getConsumableSortPropertiesForRepresentation(c.oParentObject.getId()).done(function(r){c.getView().fireEvent(C.ADDPROPERTY,{"oSourceView":c.getView(),"sProperty":r.consumable[0],"sContext":c.getView().getViewData().oPropertyTypeData.sContext});c.oConfigurationEditor.setIsUnsaved();d.resolve();});return d.promise();}});}());
