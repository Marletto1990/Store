/*!
 * SAP APF Analysis Path Framework
 *
 * (c) Copyright 2012-2018 SAP SE. All rights reserved
 */
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/odata/v2/ODataModel","sap/apf/utils/utils"],function(C,F,a,O,u){"use strict";function _(c){var p={serviceUrl:c.getView().getViewData().getCalatogServiceUri(),json:true,async:true,useBatch:true};return new O(p);}function b(c){var t=c.getView().getViewData().oTextReader;var s=c.byId("idGatewayCatalogListDialog");s.setTitle(t("selectService"));s.setNoDataText(t("noDataText"));}return C.extend("sap.apf.modeler.ui.controller.catalogService",{handleSearch:function(e){var c=this;var s=e.getParameter("value").trim();var d=s.toUpperCase();var l=s.toLowerCase();var f=[new F("TechnicalServiceName",a.Contains,d),new F("TechnicalServiceName",a.Contains,l)];var o=new F(f,false);var S=c.byId("idGatewayCatalogListDialog");S.getBinding("items").filter(o);},onInit:function(){var c=this;var d=_(c);var s=c.byId("idGatewayCatalogListDialog");b(c);s.setModel(d);s.open();},handleConfirm:function(e){var c=this,s=e.getParameter('selectedItem').getProperty('title');var S=c.byId("idGatewayCatalogListDialog");var p=c.getView().getViewData().parentControl;S.getBinding("items").filter([]);p.fireEvent("selectService",{"sSelectedService":s});c.byId("idGatewayCatalogListDialog").destroy();c.getView().destroy();},handleCancel:function(){var c=this;c.byId("idGatewayCatalogListDialog").destroy();c.getView().destroy();},handleFormatting:function(s){var p=u.extractPathnameFromUrl(s);return p;}});});
