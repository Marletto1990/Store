<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Outbound Navigation and Inbound Navigation</title>
      <link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon">
      <link rel="shortcut icon" href="themes/sap-default/img/favicon.ico">
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="abstract" content>
      
      <meta name="description" content>
      
      <meta name="content category" content="development">
      <script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"9072139676d740e7b05da293d5aa4269.html","previousTopicHref":"47be85530a5df37ae10000000a44176d.html"}</script>
      <link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css">
      <script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script>
      <script type="text/javascript" src="toc-info.js"></script>
      <script type="text/javascript" src="themes/sap-default/js/script.js"></script>
      
      		<!--[if lt IE 9]>
      			<script>
      			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
      			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
      			    "progress,section,time,video").split(',');
      			  for (var i = 0; i < e.length; i++) {
      			    document.createElement(e[i]);
      			  }
      			</script>
      		<![endif]-->
      
      <script>
      function addLoadEvent(func) {
      var oldonload = window.onload;
      if (typeof window.onload != 'function') {
      window.onload = func;
      } else {
      window.onload = function() {
      if (oldonload) {
      oldonload();
      }
      func();
      }
      }
      }
      
      addLoadEvent(function() { prettyPrint();
      if ($('#local-navigation').length) {
      $('#local-navigation').navigation();
      }
      
      
      });
      
      </script>
      <script type="text/javascript" src="js/prettify.js"> </script>
      <script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script>
      
      
      <script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head>
   <body class="en-us sap-default centered navigation-default enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;">
      <div id="d4h5-main-container" class="container_12" role="application">
         <ul id="page-links" class="hidden">
            <li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li>
            <li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li>
            <li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li>
         </ul>
         
         
         <div id="d4h5-section-container" class="grid_12" style="padding-top: 0;">
            
            
            
            <div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;">
               <section>
                  <div id="content-toolbar" class="toolbar hide-for-small"></div>
                  <div class="page concept  - topic-topic concept-concept " id="loioa2e3ed7706a646e4b8746912e8d22f79">
                     
                     <h1 class="title topictitle1" hidden>Outbound Navigation and Inbound Navigation</h1>
                     
                     <div class="body conbody">
                        <p class="shortdesc" hidden></p>
                        
                        
                        <p class="p">You can navigate from an APF-based application to another SAP Fiori application (outbound
                           navigation) and you can also navigate from an SAP Fiori application to an APF-based
                           application (inbound navigation). 
                        </p>
                        
                        		
                        <p class="p">In both cases, the source application sends a context object to the target application using
                           the app state. The context object contains a filter object. This filter object
                           represents selections made in the source application and hands over these selections to
                           the target application in the form of a filter. The target application applies the
                           filter or parts of it. For example, the target application can apply the filter to its
                           data requests or visualize the filter as selections in the charts on the UI.
                        </p>
                        
                        		
                        <div class="section" id="loioa2e3ed7706a646e4b8746912e8d22f79__section_ffr_dkj_3z">
                           <section class="section" type="Outbound Navigation">
                              <h2 class="section_title" style="font-size: 1.15em;">Outbound Navigation</h2>
                              
                              
                              <p class="p">When navigating from an APF-based application to another application, APF puts the
                                 cumulative filter of the current analysis path into the context object. The
                                 cumulative filter includes start filters and other filters such as selections made
                                 in the charts up to the active analysis step. The context object stores the
                                 cumulative filter in the formats described in the section <a class="xref" href="../../#/topic/a2e3ed7706a646e4b8746912e8d22f79.html#loioa2e3ed7706a646e4b8746912e8d22f79__section_FilterFormats" target="_top">Filter
                                    Formats</a>.
                              </p>
                              
                              
                              <p class="p">APF tries to reduce the cumulative filter to the select options format. If this is
                                 successful, the resulting filter is stored in the context object in the property
                                 <samp class="ph codeph">selectionVariant</samp>.
                              </p>
                              
                              
                              <p class="p">If it is not possible to reduce the cumulative filter, the value of the property
                                 <samp class="ph codeph">selectionVariant</samp> contains an error text instead of a select
                                 option. This is because select options can only express a subset of all possible
                                 filters whereas the format <samp class="ph codeph">sap.ui.model.Filter</samp> can express all
                                 filters created by APF.
                              </p>
                              
                              
                              <p class="p">In addition, APF always creates a filter in the <samp class="ph codeph">sap.ui.model.Filter</samp>
                                 format and stores it in the property <samp class="ph codeph">sapApfCumulativeFilter</samp>.
                              </p>
                              
                              
                              <p class="p">The consuming application can read the app state as follows:</p>
                              
                              <pre class="pre codeblock prettyprint">sap.ushell.Container
    .getService(&quot;CrossApplicationNavigation&quot;)
    .getAppState(oInject.instances.component, crossAppStateKey)
    .done(function(appState) {
        contextObject = appState.getData();
        if (contextObject &amp;&amp; contextObject.sapApfCumulativeFilter) {
            // your code that processes the filter
        }
    });</pre>
                              
                              </section>
                        </div>
                        		
                        <div class="section">
                           <section class="section" type="Inbound Navigation">
                              <h2 class="section_title" style="font-size: 1.15em;">Inbound Navigation</h2>
                              			
                              			
                              <p class="p">When you navigate from an SAP Fiori application to an APF-based application, the SAP Fiori
                                 application can hand over a filter in the context object. The APF-based application
                                 automatically applies this filter to the analysis path. The context object contains
                                 the filter in one of the formats described in the section <a class="xref" href="../../#/topic/a2e3ed7706a646e4b8746912e8d22f79.html#loioa2e3ed7706a646e4b8746912e8d22f79__section_FilterFormats" target="_top">Filter
                                    Formats</a>.
                              </p>
                              
                              			
                              <p class="p">The source application can set the app state as follows:</p>
                              
                              <pre class="pre codeblock prettyprint">var oCrossAppNavigator = sap.ushell.Container.getService(&quot;CrossApplicationNavigation&quot;);
var contextObject = {};
contextObject.sapApfCumulativeFilter = //add filter here
contextObject.selectionVariant = //add selectionVariant here
appState = oCrossAppNavigator.createEmptyAppState(oInject.instances.component);
appState.setData(contextObject);
appState.save();
oCrossAppNavigator.toExternal({
    target : {
        semanticObject : oNavigationTarget.semanticObject,
        action : oNavigationTarget.action
    },
    appStateKey : appState.getKey()
});
</pre>
                              
                              		</section>
                        </div>
                        		
                        <div class="section" id="loioa2e3ed7706a646e4b8746912e8d22f79__section_FilterFormats">
                           <section class="section" type="Filter Formats">
                              <h2 class="section_title" style="font-size: 1.15em;">Filter Formats</h2>
                              <p class="p">APF hands over the cumulative
                                 filter of the current analysis path including all analysis steps up to the current
                                 step using the <samp class="ph codeph">CrossApplicationNavigation</samp> service of the unified
                                 shell. For more information, see the <a class="xref" href="../../#/api/sap.ushell.services.CrossApplicationNavigation" target="_top" alt="#/api/sap.ushell.services.CrossApplicationNavigation" title="#/api/sap.ushell.services.CrossApplicationNavigation">API Reference</a> in the Demo Kit.
                              </p>
                              
                              <p class="p">The
                                 context object contains two different properties that hand over the filter in two
                                 different formats:
                              </p>
                              
                              <ul class="ul" id="loioa2e3ed7706a646e4b8746912e8d22f79__ul_exs_nyp_pv">
                                 
                                 <li class="li">
                                    
                                    <p class="p">Property <samp class="ph codeph">sapApfCumulativeFilter</samp>:
                                    </p>
                                    
                                    
                                    <p class="p">Filter object in the format of <samp class="ph codeph">sap.ui.model.Filter</samp></p>
                                    
                                    
                                    <p class="p">For more
                                       information, see the <a class="xref" href="../../#/api/sap.ui.model.Filter" target="_top" alt="#/api/sap.ui.model.Filter" title="#/api/sap.ui.model.Filter">API Reference</a> in the Demo Kit.
                                    </p>
                                    
                                    
                                 </li>
                                 
                                 
                                 <li class="li">
                                    
                                    <p class="p">Property <samp class="ph codeph">selectionVariant</samp>:
                                    </p>
                                    
                                    
                                    <p class="p">Filter object in a select options format</p>
                                    
                                    
                                    <p class="p">For more information, search for &quot;Selection Variants&quot; <span class="ph">in the documentation of your <span class="ph pname">SAP NetWeaver</span> version on the SAP Help Portal at <a class="xref" href="https://help.sap.com/viewer/p/SAP_NETWEAVER" target="_blank" alt="https://help.sap.com/viewer/p/SAP_NETWEAVER" title="https://help.sap.com/viewer/p/SAP_NETWEAVER">https://help.sap.com/viewer/p/SAP_NETWEAVER</a></span>.
                                    </p>
                                    
                                    
                                 </li>
                                 
                                 
                              </ul>
                              
                              <aside class="note note insertion"><span class="title">Note</span> 
                                 
                                 <p class="p">The type information of a property is not included in any of the filters. If the
                                    consuming application requires the type information, it can be derived from the
                                    metadata. 
                                 </p>
                                 
                                 
                              </aside>
                              
                              <div class="sectiondiv subsection">
                                 
                                 <p class="p subsectiontitle">The Select Options Format</p>
                                 
                                 
                                 <p class="p">When the property <samp class="ph codeph">selectionVariant</samp> of a context object is not
                                    undefined, it contains an object of the following form:
                                 </p>
                                 
                                 <pre class="pre codeblock prettyprint">{
    &quot;SelectionVariantID&quot;: <var class="keyword varname">&lt;String&gt;</var>,
    &quot;ParameterContextUrl&quot;: <var class="keyword varname">&lt;String&gt;</var>,
    &quot;FilterContextUrl&quot;: <var class="keyword varname">&lt;String&gt;</var>,
    &quot;Text&quot;: <var class="keyword varname">&lt;String&gt;</var>,
    &quot;Parameters&quot;: [],
    &quot;ODataFilterExpression&quot;: <var class="keyword varname">&lt;String&gt;</var>,
    &quot;SelectOptions&quot;: [&#x2026;]
}
</pre>
                                 
                                 </div>
                              <p class="p">The property <samp class="ph codeph">SelectOptions</samp> contains the filter object.
                                 The filter object is an array that expresses a conjunction. The elements of the
                                 array are range
                                 expressions.
                              </p>
                              <pre class="pre codeblock prettyprint">&quot;SelectOptions&quot;: [
    {
        &quot;PropertyName&quot;: <var class="keyword varname">&lt;String&gt;</var>,
        &quot;Ranges&quot;: [&#x2026;]
    }	
]
</pre>
                              <p class="p">A
                                 range expression is a filter that represents ranges and disjunctions of
                                 values.
                              </p>
                              <pre class="pre codeblock prettyprint">{
    &quot;Sign&quot;: &quot;I&quot; | &quot;E&quot;,
    &quot;Option&quot;: &lt;Char(2)&gt;,
    &quot;Low&quot;: <var class="keyword varname">&lt;String&gt;</var>,
    &quot;High&quot;: <var class="keyword varname">&lt;String&gt;</var> | null
}
</pre>
                              <p class="p"><samp class="ph codeph">Sign</samp>
                                 expresses inclusion or exclusion. <samp class="ph codeph">Option</samp> expresses the operator,
                                 for instance, &quot;EQ&quot; for equal or &quot;BT&quot; for between. The other two properties express a
                                 low value and a high value. The high value is optional. If it is not used, it is set
                                 to null.
                              </p>
                              
                              <p class="p"><span class="ph emphasis emphasis">Example:</span> The following filter expresses that
                                 values are either equal to 1 or between 3 and
                                 5:
                              </p>
                              <pre class="pre codeblock prettyprint">&quot;Ranges&quot;: [
    {
        &quot;Sign&quot;: &quot;I&quot;,
        &quot;Option&quot;: &quot;EQ&quot;,
        &quot;Low&quot;: &quot;0001&quot;,
        &quot;High&quot;: null
    },
    {
        &quot;Sign&quot;: &quot;I&quot;,
        &quot;Option&quot;: &quot;BT&quot;,
        &quot;Low&quot;: &quot;0003&quot;,
        &quot;High&quot;: &quot;0005&quot;
    }
]
</pre>
                              <aside class="note note insertion"><span class="title">Note</span> APF
                                 does not support exclusions (property <samp class="ph codeph">Sign</samp> equals
                                 &quot;E&quot;).
                              </aside>
                              
                           </section>
                        </div>
                        		
                        <div class="example">
                           <h2 class="insertiontitle exampletitle">Example</h2>
                           <pre class="pre codeblock prettyprint">{
    &quot;SelectionVariantID&quot; : &quot;20141023134315&quot;,
    &quot;ParameterContextUrl&quot; : &#x201C;/(..)/AccountBalance/$metadata#AccountBalanceQueryParameters&quot;,
    &quot;FilterContextUrl&quot; : &#x201C;/(..)/AccountBalance/$metadata#AccountBalanceQueryResult&quot;,
    &quot;Text&quot; : &quot;Temporary Selection Variant, Account Balance, 24.10.2014 13:43:15&quot;,
    &quot;Parameters&quot; : [
        {
            &quot;PropertyName&quot; : &quot;DisplayCurrency&quot;,
            &quot;PropertyValue&quot; : &quot;EUR&quot;
        },
        {
            &quot;PropertyName&quot; : &quot;ExchangeRateType&quot;,
            &quot;PropertyValue&quot; : &quot;M&quot;
        }
    ],
    &quot;ODataFilterExpression&quot; : &quot;&quot;,
    &quot;SelectOptions&quot; : [
        {
            &quot;PropertyName&quot; : &quot;CompanyCode&quot;,
            &quot;Ranges&quot; : [ 
                {
                &quot;Sign&quot; : &quot;I&quot;,
                &quot;Option&quot; : &quot;EQ&quot;,
                &quot;Low&quot; : &quot;0001&quot;,
                &quot;High&quot; : null
                },
                {
                &quot;Sign&quot; : &quot;I&quot;,
                &quot;Option&quot; : &quot;EQ&quot;,
                &quot;Low&quot; : &quot;0002&quot;,
                &quot;High&quot; : null
                }
            ]
        },
        {
            &quot;PropertyName&quot; : &quot;FiscalYear&quot;,
            &quot;Ranges&quot; : [
                {
                &quot;Sign&quot; : &quot;I&quot;,
                &quot;Option&quot; : &quot;EQ&quot;,
                &quot;Low&quot; : &quot;2014&quot;,
                &quot;High&quot; : null
                }
            ]
        },
        {
            &quot;PropertyName&quot; : &quot;GLAccount&quot;,
            &quot;Ranges&quot; : [
                {
                &quot;Sign&quot; : &quot;I&quot;,
                &quot;Option&quot; : &quot;BT&quot;,
                &quot;Low&quot; : &quot;10000&quot;,
                &quot;High&quot; : &quot;20000&quot;
                },
                {
                &quot;Sign&quot; : &quot;I&quot;,
                &quot;Option&quot; : &quot;EQ&quot;,
                &quot;Low&quot; : &quot;30000&quot;,
                &quot;High&quot; : null
                }
            ]
        }
] }  
</pre>
                           
                           		</div>
                        
                        	
                     </div>
                     
                     <div class="related-links"> 
                        
                        <div class="relinfo">
                           <div class="relinfotitle ">Related Information</div>
                           
                           <div><a class="link" href="../../#/topic/d5762bcb9bf047d6a1b2db2b92f8fa69.html" target="_top">Creating Navigation Targets</a></div>
                           
                           <div><a class="link" href="../../#/topic/f7da7d53b5c19456e10000000a423f68.html" target="_top">Analysis Path Processing</a></div>
                           
                        </div>
                        
                     </div>
                     
                  </div>
                  
               </section>
               <div class="clear"></div>
               
            </div>
            <div class="clearfix"></div>
         </div>
      </div>
      <div class="clearfix"></div>
      <div id="footer-container" class="grid_12">
         <footer>
            	
            <div id="custom-footerSpacer"></div>
            	
            
         </footer>
         
         
      </div>
   </body>
</html>