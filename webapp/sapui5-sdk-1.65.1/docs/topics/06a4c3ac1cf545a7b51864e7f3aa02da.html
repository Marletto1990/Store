<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Smart Variant Management</title>
      <link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon">
      <link rel="shortcut icon" href="themes/sap-default/img/favicon.ico">
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="abstract" content="The sap.ui.comp.smartvariants.SmartVariantManagement control provides an interface to enable a simple integration of the sap.ui.comp.variants.VariantManagement control and access to the layered repository of SAPUI5 flexibility for easy communication.">
      
      <meta name="description" content="The sap.ui.comp.smartvariants.SmartVariantManagement control provides an interface to enable a simple integration of the sap.ui.comp.variants.VariantManagement control and access to the layered repository of SAPUI5 flexibility for easy communication.">
      
      <meta name="content category" content="development">
      <script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"72227f813bef427bad2e847b6fb1583d.html","previousTopicHref":"bed8274140d04fc0b9bcb2db42d8bac2.html"}</script>
      <link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css">
      <script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script>
      <script type="text/javascript" src="toc-info.js"></script>
      <script type="text/javascript" src="themes/sap-default/js/script.js"></script>
      
      		<!--[if lt IE 9]>
      			<script>
      			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
      			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
      			    "progress,section,time,video").split(',');
      			  for (var i = 0; i < e.length; i++) {
      			    document.createElement(e[i]);
      			  }
      			</script>
      		<![endif]-->
      
      <script>
      function addLoadEvent(func) {
      var oldonload = window.onload;
      if (typeof window.onload != 'function') {
      window.onload = func;
      } else {
      window.onload = function() {
      if (oldonload) {
      oldonload();
      }
      func();
      }
      }
      }
      
      addLoadEvent(function() { prettyPrint();
      if ($('#local-navigation').length) {
      $('#local-navigation').navigation();
      }
      $('.collapsible').collapsify({"expandText":"Display Content","collapseText":"Hide Content","codeblockText":"Code Sample","codeblockCopyText":"Copy code to clipboard","codeblockSelectText":"Select code for copying to clipboard"});
      
      
      });
      
      </script>
      <script type="text/javascript" src="js/prettify.js"> </script>
      <script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script>
      
      
      <script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head>
   <body class="en-us sap-default centered navigation-default enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;">
      <div id="d4h5-main-container" class="container_12" role="application">
         <ul id="page-links" class="hidden">
            <li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li>
            <li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li>
            <li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li>
         </ul>
         
         
         <div id="d4h5-section-container" class="grid_12" style="padding-top: 0;">
            
            
            
            <div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;">
               <section>
                  <div id="content-toolbar" class="toolbar hide-for-small"></div>
                  <div class="page concept  - topic-topic concept-concept " id="loio06a4c3ac1cf545a7b51864e7f3aa02da">
                     
                     <h1 class="title topictitle1" hidden>Smart Variant Management </h1>
                     
                     <div class="body conbody">
                        <p class="shortdesc" hidden>The <samp class="ph codeph">sap.ui.comp.smartvariants.SmartVariantManagement</samp> control provides
                           		an interface to enable a simple integration of the
                           			<samp class="ph codeph">sap.ui.comp.variants.VariantManagement</samp>
                           		control and access to the layered repository of <span class="ph"><span class="ph pname">SAPUI5</span></span> flexibility for easy
                           		communication.
                        </p>
                        
                        		
                        <aside class="note caution insertion"><span class="title">Caution</span> 
                           
                           <p class="p">Controls in the <samp class="ph codeph">sap.ui.comp</samp> library (smart controls) focus
                              strongly on SAP Fiori elements.
                           </p>
                           
                           
                           <p class="p">We will continue to maintain the library and all of its controls in the future.
                              However, there will be no development of new features unless specifically
                              requested by SAP Fiori elements.
                           </p>
                           
                           
                        </aside>
                        
                        		
                        <p class="p"><span class="ph">The frequently asked questions section below aims at answering some
                              				basic questions that you might have when using this control.</span></p>
                        
                        		
                        <aside class="note note insertion"><span class="title">Note</span> <span class="ph">The code samples in this section reflect examples of possible use
                              				cases and might not always be suitable for your purposes. Therefore, we recommend
                              				that you do not copy and use them directly.</span></aside>
                        
                        		
                        <p class="p"><span class="ph">For more information
                              				about this control, see the <a class="xref" href="../../#/api/sap.ui.comp.smartvariants.SmartVariantManagement" target="_top" alt="#/api/sap.ui.comp.smartvariants.SmartVariantManagement" title="#/api/sap.ui.comp.smartvariants.SmartVariantManagement">API Reference</a> and the
                              				<a class="xref" href="../../#/sample/sap.ui.comp.tutorial.smartControls.07/preview" target="_top" alt="#/sample/sap.ui.comp.tutorial.smartControls.07/preview" title="#/sample/sap.ui.comp.tutorial.smartControls.07/preview">sample</a>.</span></p>
                        
                        		
                        <div class="section">
                           <section class="section" type="Overview">
                              <h2 class="section_title" style="font-size: 1.15em;">Overview</h2>
                              			
                              			
                              <p class="p">The <samp class="ph codeph">SmartVariantManagement</samp> control is a specialization of the
                                 					<samp class="ph codeph">VariantManagement</samp> control. This basic control handles the
                                 				visual representation of variants, or views, on the user interface.
                              </p>
                              
                              			
                              <aside class="note note insertion"><span class="title">Note</span> You can define views for specific selections of data on the user interface, for
                                 				example, based on filter settings. Views are also called variants, usually in a more
                                 				technical context, for example, in the API names and texts of the control.
                              </aside>
                              
                              			
                              <p class="p">The <samp class="ph codeph">SmartVariantManagement</samp> control communicates with the layered
                                 				repository. The layered repository provides a way to store and retrieve flexibility
                                 				information, such as personalization data and views for other controls.
                              </p>
                              
                              			
                              			
                              <p class="p">End
                                 				users can create, change, and save
                                 				views
                                 				that will then be stored in the <samp class="ph codeph">USER</samp> or <samp class="ph codeph">CUSTOMER</samp>
                                 				layer of the layered repository depending on the relevant use case.
                              </p>
                              
                              			
                              			
                              <p class="p">For more information about <span class="ph"><span class="ph pname">SAPUI5</span></span>
                                 				flexibility and the layering concept, see <a class="xref" href="../../#/topic/a8e55aa2f8bc4127923b20685a6d1621.html" title="Modification-free, cost-saving, easy to use, and performant: Discover the new flexibility when adapting SAP Fiori UIs using SAPUI5 flexibility." target="_top">SAPUI5 Flexibility: Adapting UIs Made Easy</a>.
                              </p>
                              
                              			
                              <aside class="note note insertion"><span class="title">Note</span> We recommend to use the <samp class="ph codeph">SmartVariantManagement</samp> control rather
                                 				than the <samp class="ph codeph">VariantManagement</samp> control, because it enables the
                                 				communication with the layered repository.
                              </aside>
                              
                              			
                              <p class="p">The <samp class="ph codeph">SmartVariantManagement</samp> control can be used in combination with
                                 				the following smart controls:
                              </p>
                              
                              			
                              <ul class="ul" id="loio06a4c3ac1cf545a7b51864e7f3aa02da__ul_fj3_xsy_zv">
                                 				
                                 <li class="li"><samp class="ph codeph">SmartFilterBar</samp>
                                    				
                                 </li>
                                 
                                 				
                                 <li class="li"><samp class="ph codeph">SmartTable</samp></li>
                                 
                                 				
                                 <li class="li"><samp class="ph codeph">SmartChart</samp></li>
                                 
                                 			
                              </ul>
                              
                              		
                           </section>
                        </div>
                        		
                        <div class="section">
                           <section class="section" type="Prerequisites">
                              <h2 class="section_title" style="font-size: 1.15em;">Prerequisites</h2>
                              			
                              			
                              <p class="p">To use the <samp class="ph codeph">SmartVariantManagement</samp> control, consuming applications have to
                                 				provide the following information and comply with the interface standard: 
                              </p>
                              
                              			
                              <ul class="ul" id="loio06a4c3ac1cf545a7b51864e7f3aa02da__ul_c2q_45y_zv">
                                 				
                                 <li class="li">The control using the personalization data </li>
                                 
                                 				
                                 <li class="li">A type</li>
                                 
                                 				
                                 <li class="li">The name of the property describing the key</li>
                                 
                                 				
                                 <li class="li">Optional information about the data source</li>
                                 
                                 			
                              </ul>
                              
                              			
                              <p class="p">This information has to be transferred to the <samp class="ph codeph">SmartVariantManagement</samp> control
                                 				during creation using the <samp class="ph codeph">personalizableControls</samp> association. To
                                 				transfer the data, the <samp class="ph codeph">sap.ui.comp.smartvariants.PersonalizableInfo</samp>
                                 				class must be used.
                              </p>
                              
                              			
                              <p class="p">The control using the personalization data must also be attached to the
                                 					<samp class="ph codeph">Initialise</samp> event of the control and call the
                                 					<samp class="ph codeph">initialise</samp> method of the control, as shown in the following
                                 				example:
                              </p>
                              
                              			<pre class="pre codeblock prettyprint lang-js">
sap.ui.require([
    &apos;sap/ui/comp/smartvariants/SmartVariantManagement&apos;,
    &apos;sap/ui/comp/smartvariants/PersonalizableInfo&apos;
], function (SmartVariantManagement, PersonalizableInfo) {

    var oSmartVariantManagement = new SmartVariantManagement();
    var oPersInfo = new PersonalizableInfo({
        type: &quot;filterBar&quot;,
        keyName: &quot;persistencyKey&quot;,
        dataSource: this.getEntityType()
    });
    oPersInfo.addControl(this);

    oSmartVariantManagement.addPersonalizableControl(oPersInfo);

    this.fnInitialiseVariants = jQuery.proxy(this._initialiseVariants, this);
    oSmartVariantManagement.attachInitialise(this.fnInitialiseVariants);

    oSmartVariantManagement.initialise();
})
</pre>
                              
                              			<p class="p">Once the <samp class="ph codeph">SmartVariantManagement</samp> control has initialized the layered
                                 				repository and retrieved the relevant changes, it informs the control using the
                                 				personalization data about the end of the initialization phase with the
                                 					<samp class="ph codeph">Initialise</samp> event.
                              </p>
                              
                              		
                           </section>
                        </div>
                        		
                        <div class="section">
                           <section class="section" type="Details">
                              <h2 class="section_title" style="font-size: 1.15em;">Details</h2>
                              <p class="p">To exchange data with the layered repository, the control using
                                 				the personalization data has to provide the following methods that can return and
                                 				retrieve variants:
                              </p>
                              
                              <ul class="ul" id="loio06a4c3ac1cf545a7b51864e7f3aa02da__ul_d2q_45y_zv">
                                 				
                                 <li class="li"><samp class="ph codeph">fetchVariant</samp></li>
                                 
                                 				
                                 <li class="li"><samp class="ph codeph">applyVariant</samp> (<samp class="ph codeph">oVariant</samp>) 
                                 </li>
                                 
                                 			
                              </ul>
                              
                              <p class="p">The <samp class="ph codeph">fetchVariant</samp> method is called by the
                                 					<samp class="ph codeph">SmartVariantManagement</samp> control
                                 				every
                                 				time an interaction takes place with the
                                 				<samp class="ph codeph">VariantManagement</samp> control and when executing a
                                 					<samp class="ph codeph">Save</samp>. In the latter case, the control using the personalization
                                 				data has to return a JSON-compliant object. The layered repository treats this
                                 				information as a black box. It does not manipulate this object in any way.
                              </p>
                              
                              <p class="p">The
                                 					<samp class="ph codeph">applyVariant</samp> method is called by the
                                 					<samp class="ph codeph">SmartVariantManagement</samp> control every time the user selects a
                                 				new entry in the view list. The previously stored JSON-compliant object will be
                                 				transferred to the <samp class="ph codeph">applyVariant</samp> method, and the control using the
                                 				personalization data can now respond to the information stored in this object, as
                                 				shown in the
                                 				example:
                              </p>
                              <pre class="pre codeblock prettyprint lang-js">
sap.ui.comp.smartfilterbar.SmartFilterBar.prototype.fetchVariant = function() {
	var aFiltersInfo;
	var oVariant = {};
	aFiltersInfo = this._determineVariantFiltersInfo();

	oVariant.filterbar = (!aFiltersInfo) ? [] : aFiltersInfo;
	oVariant.filterBarVariant = this._fetchVariantFiltersData();

	return oVariant;
};

sap.ui.comp.smartfilterbar.SmartFilterBar.prototype.applyVariant = function(oVariant) {

	this._applyVariant(oVariant);
};
</pre>
                              <aside class="note note insertion"><span class="title">Note</span> The
                                 					<samp class="ph codeph">SmartVariantManagement</samp> control triggers the
                                 					<samp class="ph codeph">fetchVariant</samp> method without any user interaction right after it
                                 				fires the <samp class="ph codeph">Initialise</samp> event. This enables the
                                 					<samp class="ph codeph">SmartVariantManagement</samp> control to handle the standard view.
                                 				This view represents the state of the user interface that is delivered by default.
                                 				The control can revert the data to this view every time the user selects the
                                 				standard view at a later point in
                                 				time.
                              </aside>
                              
                              <div class="sectiondiv subsection">
                                 				
                                 <p class="p subsectiontitle">Page
                                    					Variants
                                 </p>
                                 
                                 				
                                 <p class="p"> A page variant is a single UI instance of the
                                    						<samp class="ph codeph">SmartVariantManagement</samp> control that can personalize
                                    						<span class="ph emphasis emphasis">multiple</span> smart controls instead of only one.
                                 </p>
                                 
                                 				
                                 <p class="p">To use this enhanced function of the <samp class="ph codeph">SmartVariantManagement</samp>
                                    					control, take the following into consideration:
                                 </p>
                                 
                                 				
                                 <ul class="ul" id="loio06a4c3ac1cf545a7b51864e7f3aa02da__ul_zkj_hbz_zv">
                                    					
                                    <li class="li">
                                       						
                                       <p class="p"> The <samp class="ph codeph">SmartVariantManagement</samp> control has a
                                          								<samp class="ph codeph">persistencyKey</samp> property of its own.
                                       </p>
                                       
                                       						
                                       <p class="p">This is the key for storing the personalization data of the smart
                                          							controls that you want to personalize.
                                       </p>
                                       
                                       					
                                    </li>
                                    
                                    					
                                    <li class="li">
                                       						
                                       <p class="p">For each smart control, a persistency key has to be provided.</p>
                                       
                                       						
                                       <p class="p">Within the personalization data, this key will identify the specific data
                                          							for each individual smart control.
                                       </p>
                                       
                                       					
                                    </li>
                                    
                                    					
                                    <li class="li">
                                       						
                                       <p class="p">The smart controls support the <samp class="ph codeph">smartVariant</samp> association
                                          							which has to be assigned along with the page variant reference.
                                       </p>
                                       
                                       					
                                    </li>
                                    
                                    				
                                 </ul>
                                 
                                 				
                                 <aside class="note note insertion"><span class="title">Note</span> If the page variant is
                                    					used
                                    					by the <samp class="ph codeph">SmartFilterBar</samp> control, the persistency key of the page
                                    					variant has to be assigned using the <samp class="ph codeph">pageVariantPersistencyKey</samp>
                                    					custom data of the <samp class="ph codeph">SmartFilterBar</samp> control. The
                                    						<samp class="ph codeph">SmartFilterBar</samp> control internally adapts the related
                                    						<samp class="ph codeph">SmartChart</samp> or <samp class="ph codeph">SmartTable</samp> controls, and
                                    					therefore, the <samp class="ph codeph">smartVariant</samp> association doesn&apos;t have to be
                                    					assigned. 
                                 </aside>
                                 
                                 				<span class="ph">For more
                                    					information about page variants, see the <a class="xref" href="../../#/sample/sap.ui.comp.tutorial.smartControls.08/preview" target="_top" alt="#/sample/sap.ui.comp.tutorial.smartControls.08/preview" title="#/sample/sap.ui.comp.tutorial.smartControls.08/preview">sample</a>.</span>
                                 				
                                 			
                              </div>
                              <div class="sectiondiv subsection">
                                 				
                                 <p class="p subsectiontitle">Favorites</p>
                                 
                                 				
                                 <p class="p">If you want to use favorites to manage your views, you have to set the
                                    						<samp class="ph codeph">useFavorites</samp>
                                    					property in the <samp class="ph codeph">VariantManagement</samp> control to
                                    						<samp class="ph codeph">true</samp> (default is <samp class="ph codeph">false</samp>).
                                 </p>
                                 
                                 				
                                 <p class="p">In the <samp class="ph codeph">VariantManagement</samp> control, each
                                    						<samp class="ph codeph">VariantItem</samp> has a <samp class="ph codeph">favorite</samp> property that
                                    					determines if the <samp class="ph codeph">VariantItem</samp> in question is treated as a
                                    					favorite.
                                 </p>
                                 
                                 				
                                 <p class="p">The <samp class="ph codeph">SmartVariantManagement</samp> control automatically starts in a
                                    					mode where favorites are activated. 
                                 </p>
                                 
                                 				
                                 <p class="p">You can define favorites in the <span class="ph uicontrol">Manage Views</span> dialog.
                                    					Favorites selected in the dialog are stored as changes in the layered repository
                                    					that are applied each time the <samp class="ph codeph">SmartVariantManagement</samp> control
                                    					is initiated.
                                 </p>
                                 
                                 			
                              </div>
                           </section>
                        </div>
                        		
                        <div class="section">
                           <section class="section" type="FAQ">
                              <h2 class="section_title" style="font-size: 1.15em;">FAQ</h2>
                              <div class="sectiondiv subsection collapsible">
                                 				
                                 <p class="p subsectiontitle">How can I make sure that only key users can make views
                                    					public?
                                 </p>
                                 
                                 				
                                 <p class="p">You can use a setting in <span class="ph"><span class="ph pname">SAPUI5</span></span>
                                    					flexibility that determines whether views can be shared or made public by all
                                    					users (default) or key users only. For more information on how to activate the
                                    					related key user check, see <a href="http://help.sap.com/disclaimer?site=https://launchpad.support.sap.com/#/notes/2658662" target="_blank">2658662 <img src="themes/sap-default/img/sap_link.png" class="link-sap" alt="Information published on SAP site" title="Information published on SAP site" border="0"></a>. For more information
                                    					about making views public, see <a class="xref" href="../../#/topic/97fc0eaaf8b045779878ea829586da1a.html" title="The VariantManagement control allows you to handle views and makes it possible for the user to persist changes carried out on the UI and then later retrieve these changes." target="_top">Step 7: View Management</a>.
                                 </p>
                                 
                                 			
                              </div>
                           </section>
                        </div>
                        	
                     </div>
                     
                  </div>
                  
               </section>
               <div class="clear"></div>
               
            </div>
            <div class="clearfix"></div>
         </div>
      </div>
      <div class="clearfix"></div>
      <div id="footer-container" class="grid_12">
         <footer>
            	
            <div id="custom-footerSpacer"></div>
            	
            
         </footer>
         
         
      </div>
   </body>
</html>