<mvc:View
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:custom="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
	xmlns:f="sap.ui.layout.form" 
	xmlns:l="sap.ui.layout"
	controllerName="app.modules.mainmodule.controller.OrderRequestDetail"
	xmlns:core="sap.ui.core"
	xmlns="sap.m"
	xmlns:tnt="sap.tnt"
	xmlns:qInput = "app.modules.mainmodule.control">
			<Page 
				id="orderRequestDetail" 
				title="Steel Store" 
				icon="sap-icon://action" 
				class="sapUiStdPage">
				<content>				
					<VBox class="sapUiSmallMargin">
						
						<f:SimpleForm id="SimpleFormChange480_12120"
							editable="true"
							layout="ResponsiveGridLayout"
							title="Новая заявка"
							labelSpanXL="4"
							labelSpanL="4"
							labelSpanM="12"
							labelSpanS="12"
							adjustLabelSpan="false"
							emptySpanXL="0"
							emptySpanL="0"
							emptySpanM="0"
							emptySpanS="0"
							columnsXL="2"
							columnsL="2"
							columnsM="1"
							singleContainerFullSize="false" >
							<f:content>
								<core:Title 
									text="Информация об объекте" 
									icon="sap-icon://meeting-room"
									emphasized="true" />
								<Label text="Контактное лицо" />
								<Input value="" />
								<Label text="Телефон контактного лица" />
								<MaskInput mask="9-999-999-99-99" placeholderSymbol="X" placeholder="пример: 8-900-555-00-00"/>
								<Label text="Улица и номер дома / строения" />
								<Input value="">
								</Input>
								<Input value="">
									<layoutData>
										<l:GridData span="XL3 L3 M4 S4" />
									</layoutData>
								</Input>
								<Label text="ИНН и ОГРН (для юр.лиц)" />
								<MaskInput mask="999999999999">
									<layoutData>
										<l:GridData span="XL3 L3 M4 S4" />
									</layoutData>
								</MaskInput>
								<Input value="0" />
								<Label text="Город" />
								<Select id="country" selectedKey="0">
									<items>
										<core:Item text="Москва" key="Moscow"/>
										<core:Item text="Санкт-Петербург" key="Saint-Petersburg"/>
										<core:Item text="Нижний Новгород" key="Nizhny Novgorod"/>
									</items>
								</Select>

								<core:Title text="Доставка и  монтаж" icon="sap-icon://inventory"/>
							
								<RadioButtonGroup columns="3" width="100%" class="sapUiMediumMarginTop" valueState="Warning">
									<buttons>
										<RadioButton id="RB1-1" text="Прямая доставка"/>
										<RadioButton id="RB1-2" text="Доставка транспортной компанией"/>
										<RadioButton id="RB1-3" text="Заберем сами"/>
									</buttons>
								</RadioButtonGroup>
								
								<RadioButtonGroup columns="3" width="100%" class="sapUiMediumMarginTop" valueState="Warning">
									<buttons>
										<RadioButton id="RB1-5" text="Монтаж нужен, в любое время!"/>
										<RadioButton id="RB1-6" text="Монтаж нужен, ночь / выходные"/>
										<RadioButton id="RB1-7" text="Смонтируем сами"/>
									</buttons>
								</RadioButtonGroup>
							</f:content>
						</f:SimpleForm>
					</VBox>
					<VBox class="sapUiSmallMargin">
						<Table 
							items="{myModel>/Cart}"
							alternateRowColors="true"
							headerText="Выбранные артикулы">

							<headerToolbar>
								<OverflowToolbar>
									<content>
										<Title text="Редактирование заявки" level="H2"/>
										<ToolbarSpacer />

										<MessageStrip
											class="sapUiSmallMargin"
											type="Success"
											text="Общая сумма по заявке {myModel>/CartData/cost} рублей"/>
										<Button id="Fire"
											text="Отправить заявку"
											press="onFire"
											type="Accept"/>
									</content>
								</OverflowToolbar>
							</headerToolbar>
							<infoToolbar>
								<Toolbar active="false">
									<Label text="Укажите количество и материал изделий"/>
								</Toolbar>
							</infoToolbar>

							<columns 
								hAlign ="End">
								<!-- <Column width="6em">
									<Label text = "Кастомный инпут"/>
								</Column> -->
								<Column 
									width="4em">
									<Label text="Позиция" />
								</Column>
								<Column
									width="8em">
								</Column>
								<Column
									width="7em">
									<Label text="Количество" />
								</Column>
								<Column
									width="8em">
									<Label text="Материал" />
								</Column>
								<Column
									width="3em">
									<Label text="Цена" />
								</Column>
								<Column
									width="3em">
									<Label text="Стоимость" />
								</Column>
								<Column
									width="5em">
									<Label text="Наличие" />
								</Column>
							</columns>
							<items>
								<ColumnListItem vAlign="Middle">
									<!-- <cells>
										<qInput:QuantityInput value="{myModel>quantity}"/>
									</cells> -->
									<cells>
										<HBox 
											alignContent="Stretch"
											alignItems="Center">
											<Image 
													src="{myModel>article_image_path}"
													height="6em"
													class="sapUiMediumMarginBegin">
											</Image>
										</HBox>
									</cells>
									<cells>
										<Label text="{myModel>article_name}" class="sapUiSmallMarginBegin"/>
									</cells>
									<cells>
										<HBox>
											<Input 
												class = "sapUiSmallMarginEnd" 
												width = "5em"
												value="{myModel>quantity}"
												type="Number"/>	
											<Button icon="sap-icon://less" press = "decr_quantity"/>	
											<Button icon="sap-icon://add" press = "incr_quantity"/>	
										</HBox>	
									</cells>
									<cells>
										<Select 
											items="{myModel>/Material}"
											selectedKey="{myModel>qMaterial}"
											forceSelection="true">
											<core:Item   
												key="{myModel>q}"
												text="{myModel>name}" />
										</Select>
									</cells>
									<cells>
										<Label text="{= Math.round(${myModel>article_price} * ${myModel>qMaterial},0)}"/>
									</cells>
									<cells>
										<Label text="{=Math.round(${myModel>article_price} * ${myModel>qMaterial} * parseInt(${myModel>quantity},10),0)}"/>
									</cells>
									<cells>
										<tnt:InfoLabel colorScheme="8" text="на складе {myModel>stock} шт"/>
									</cells>
								</ColumnListItem>
							</items>
						</Table>
					</VBox> 
				</content>
			</Page>
</mvc:View>